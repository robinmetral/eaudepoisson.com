import { graphql, Link } from "gatsby"
import { css } from "@emotion/core"

import PostsList from "../components/PostsList"
import Button from "../components/Button"

<PostsList posts={props.data.allMdx.nodes} />

<Button
  as={Link}
  to={`/blog`}
>
  Tous les articles
</Button>

export const LatestPostsQuery = graphql`
  query LatestPostsQuery {
    allMdx(sort: { order: DESC, fields: frontmatter___date }, limit: 5) {
      nodes {
        frontmatter {
          id
          title
          date
          featured {
            localFile {
              childImageSharp {
                fluid(maxHeight: 400, maxWidth: 1024, cropFocus: ENTROPY) {
                  ...GatsbyImageSharpFluid
                  presentationWidth
                }
              }
            }
          }
        }
        excerpt
        fields {
          slug
        }
      }
    }
  }
`
