---
title: "Blog"
---

import { graphql } from "gatsby";
import Search from "../components/Search";

<p>
  {/* the wrapper p tag is necessary to use the variable from the query */}
  Cette page contient les {props.data.allMdx.nodes.length} articles du blog, du plus
  r√©cent au plus ancien. Vous pouvez aussi les filtrer en faisant une recherche ci-dessous.
</p>

<Search posts={props.data.allMdx.nodes} />

export const AllPostsQuery = graphql`
  query AllPostsQuery {
    allMdx(sort: { order: DESC, fields: frontmatter___date }) {
      nodes {
        frontmatter {
          id
          title
          date
          featured {
            localFile {
              childImageSharp {
                fluid(maxHeight: 400, maxWidth: 1024, cropFocus: ENTROPY) {
                  ...GatsbyImageSharpFluid
                  presentationWidth
                }
              }
            }
          }
        }
        excerpt
        fields {
          slug
        }
      }
    }
  }
`;
